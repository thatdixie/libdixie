#!/bin/sh
######################################

#######################################
#
b="build_dir.h"

if g++ -I$HOME/include -I. CGIDiaper.cpp -c; then
    echo "CGIDiaper Object created..."
    if ar cr $HOME/lib/libdixie.a CGIDiaper.o; then
        echo "CGIDiaper.o added to $HOME/lib/libdixie.a library..."
        if [ -f $b ]; then
            rm $b
        fi
        echo "Creating configuration and new "$b"..."
        echo "/*" >> $b
        echo " * Auto-generated by "$script" on "`date` >> $b
        echo " */"  >> $b
        echo "#ifndef BUILDDIR_H" >> $b
        echo "#define BUILDDIR_H" >> $b
        echo "static const string CONF_DIR =\""$PWD"\";" >> $b
        echo "#endif" >> $b
        if g++  test.cpp -I$HOME/include -I. -L$HOME/lib -ldixie -o test.cgi; then
            echo "Build complete -- run ./test.cgi to verify"
            cp test.cgi web
	    echo "or go to http://thatdixiebitch/test.cgi"
        else
            echo "***ERROR compiling test.cpp"
        fi
    else
        echo "***ERROR adding to library build terminated "
    fi
else
    echo "***ERRORS in compiling build terminated "
fi

 
